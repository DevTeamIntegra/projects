sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","./utilities","sap/ui/core/routing/History","prestamosgp2/utils/utils","prestamosgp2/model/models"],function(t,e,n,o,i,s){"use strict";return t.extend("prestamosgp2.controller.DetailConsumo",{handleRouteMatched:function(t){var e="App64ca9cab5325fba361b2af22";var n={};if(t.mParameters.data.context){this.sContext=t.mParameters.data.context}else{if(this.getOwnerComponent().getComponentData()){var o=function(t){if(Object.keys(t).length!==0){for(var e in t){if(e!=="sourcePrototype"&&e.includes("Set")){return e+"("+t[e][0]+")"}}}};this.sContext=o(this.getOwnerComponent().getComponentData().startupParameters)}}var i;if(this.sContext){i={path:"/"+this.sContext,parameters:n};this.getView().bindObject(i)}},_onButtonPress:function(t){this.getOwnerComponent().setModelVivienda(s.getSimulacionConsumo(this.getEntries(),this.getOwnerComponent().oToken,this.getView()));var n=t.getSource().getBindingContext();return new Promise(function(t){this.doNavigate("DetailConsumo2",n,t,"")}.bind(this)).catch(function(t){if(t!==undefined){e.error(t.message)}})},getEntries:function(){var t=i.getTipoNum(this.byId("idInputConsumoTipo").getValue());var e=this.byId("idCBoxConsumoMes").getSelectedKey();var n=this.byId("idLabelCosnumoAnyo").getValue();var o=this.byId("idSliderConsumoMensualidades").getValue();var s=this.byId("idCheckConsumoAnyo").getSelected();s?o=parseInt(o)+1:o=o;return{tipoPrestamo:t,mesInicio:e,anioInicio:n,plazo:o}},doNavigate:function(t,e,n,o){var i=e?e.getPath():null;var s=e?e.getModel():null;var a;if(i!==null&&i!==""){if(i.substring(0,1)==="/"){i=i.substring(1)}a=i.split("(")[0]}var r;var u=this.sMasterContext?this.sMasterContext:i;if(a!==null){r=o||this.getOwnerComponent().getNavigationPropertyForNavigationWithContext(a,t)}if(r!==null&&r!==undefined){if(r===""){this.oRouter.navTo(t,{context:i,masterContext:u},false)}else{s.createBindingContext(r,e,null,function(e){if(e){i=e.getPath();if(i.substring(0,1)==="/"){i=i.substring(1)}}else{i="undefined"}if(i==="undefined"){this.oRouter.navTo(t)}else{this.oRouter.navTo(t,{context:i,masterContext:u},false)}}.bind(this))}}else{this.oRouter.navTo(t)}if(typeof n==="function"){n()}},onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getTarget("DetailConsumo").attachDisplay(jQuery.proxy(this.handleRouteMatched,this));var t=this.getView();t.addEventDelegate({onBeforeShow:function(){if(sap.ui.Device.system.phone){var e=t.getContent()[0];if(e.getShowNavButton&&!e.getShowNavButton()){e.setShowNavButton(true);e.attachNavButtonPress(function(){this.oRouter.navTo("MasterPage1",{},true)}.bind(this))}}}.bind(this)})},_onChangeMensualidades:function(t){var e=this.getView();var n=t.getSource().getValue();e.byId("idInputConsumoAnyosText").setValue(n)},onAfterRendering:function(){var t=i.getActualDate();this.setDate(t)},setDate:function(t){var e=this.byId("idLabelCosnumoAnyo");e.setValue(t.anyo);var n=this.byId("idCBoxConsumoMes");n.setSelectedKey(t.mes)}})},true);
//# sourceMappingURL=DetailConsumo.controller.js.map