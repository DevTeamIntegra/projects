sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","./utilities","sap/ui/core/routing/History","prestamosgp2/utils/utils","prestamosgp2/model/models"],function(e,t,i,n,o,a){"use strict";return e.extend("prestamosgp2.controller.DetailVivienda",{handleRouteMatched:function(e){var t="App64ca9cab5325fba361b2af22";var i={};if(e.mParameters.data.context){this.sContext=e.mParameters.data.context}else{if(this.getOwnerComponent().getComponentData()){var n=function(e){if(Object.keys(e).length!==0){for(var t in e){if(t!=="sourcePrototype"&&t.includes("Set")){return t+"("+e[t][0]+")"}}}};this.sContext=n(this.getOwnerComponent().getComponentData().startupParameters)}}var o;if(this.sContext){o={path:"/"+this.sContext,parameters:i};this.getView().bindObject(o)}},_onButtonPress:function(e){this.getOwnerComponent().setModelVivienda(a.getSimulacionVivienda(this.getEntries(),this.getOwnerComponent().oToken,this.getView()));var i=e.getSource().getBindingContext();return new Promise(function(e){this.doNavigate("DetailVivienda2",i,e,"")}.bind(this)).catch(function(e){if(e!==undefined){t.error(e.message)}})},doNavigate:function(e,t,i,n){var o=t?t.getPath():null;var a=t?t.getModel():null;var s;if(o!==null&&o!==""){if(o.substring(0,1)==="/"){o=o.substring(1)}s=o.split("(")[0]}var r;var u=this.sMasterContext?this.sMasterContext:o;if(s!==null){r=n||this.getOwnerComponent().getNavigationPropertyForNavigationWithContext(s,e)}if(r!==null&&r!==undefined){if(r===""){this.oRouter.navTo(e,{context:o,masterContext:u},false)}else{a.createBindingContext(r,t,null,function(t){if(t){o=t.getPath();if(o.substring(0,1)==="/"){o=o.substring(1)}}else{o="undefined"}if(o==="undefined"){this.oRouter.navTo(e)}else{this.oRouter.navTo(e,{context:o,masterContext:u},false)}}.bind(this))}}else{this.oRouter.navTo(e)}if(typeof i==="function"){i()}},onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getTarget("DetailVivienda").attachDisplay(jQuery.proxy(this.handleRouteMatched,this));var e=this.getView();e.addEventDelegate({onBeforeShow:function(){if(sap.ui.Device.system.phone){var t=e.getContent()[0];if(t.getShowNavButton&&!t.getShowNavButton()){t.setShowNavButton(true);t.attachNavButtonPress(function(){this.oRouter.navTo("MasterPage1",{},true)}.bind(this))}}}.bind(this)})},onAfterRendering:function(){var e=o.getActualDate();this.setDate(e);this.getView().byId("idInputViviendaAnyosText").addStyleClass("bolder-text")},setDate:function(e){var t=this.byId("idLabelViviendaAnyo");t.setValue(e.anyo);var i=this.byId("idCBoxViviendaMes");i.setSelectedKey(e.mes)},getEntries:function(){var e=o.getTipoNum(this.byId("idInputViviendaTipo").getValue());var t=parseInt(this.byId("idCBoxViviendaCarencia").getSelectedKey());var i=parseInt(this.byId("idCBoxViviendaCondicion").getSelectedKey());var n=this.byId("idCBoxViviendaMes").getSelectedKey();var a=this.byId("idLabelViviendaAnyo").getValue();var s=this.byId("idSliderVivviendaImporte").getValue();var r=parseInt(this.byId("idSliderViviendaAnyos").getValue());return{tipoPrestamo:e,carencia:t,crecimiento:i,mesInicio:n,anioInicio:a,importe:s,plazo:r}},_onChangeImporte:function(e){var t=this.getView();var i=e.getSource().getValue();t.byId("idInputViviendaTipoText").setValue(i)},_onChangeAnyos:function(e){var t=this.getView();var i=e.getSource().getValue();t.byId("idInputViviendaAnyosText").setValue(i)}})},true);
//# sourceMappingURL=DetailVivienda.controller.js.map