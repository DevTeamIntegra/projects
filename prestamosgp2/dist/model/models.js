sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device","prestamosgp2/utils/utils","sap/ui/thirdparty/jquery"],function(e,a,s,jQuery){"use strict";return{createDeviceModel:function(){var s=new e(a);s.setDefaultBindingMode("OneWay");return s},getToken:function(e){var a=s.getUrl();var r=this;var t;var n;var o=new FormData;o.append("username","ext2215");o.append("password","ext2215");o.append("grant_type","password");o.append("client_id","PRT");o.append("application","PRT");t=a+"/nassa/oauth/token";const i=o;jQuery.ajax({type:"POST",async:false,url:t,data:i,processData:false,contentType:false,headers:{Authorization:"Basic UFJUOiQ0YSQxMSRja1k0UyRQVkVoL0NaWkp2b0E1WlUuSlhqU05maFlUSmpsbFN1UTRITG41L1diWjE5NEJuVw=="},success:function(a){if(a){var s=a;e(s);setTimeout(function(){r.getToken(e)},parseInt(s.expires_in))}else{e(null)}},error:function(a){e(null)}});return n},getUserInfoAndRole:function(a){var r=window.location.href;var t=r.split("user=");const n=s.getUrl()+"/user-api/attributes";var o=new e;var i={firstname:"Dummy",lastname:"User",email:"dummy.user@com",name:t[1],displayName:"Dummy User (dummy.user@com)"};o.loadData(n);o.dataLoaded().then(()=>{if(!o.getData().email){o.setData(i)}a.setModel(o,"userInfo");try{loggedUser=t[1]}catch(e){loggedUser=t[1]}if(loggedUser==="esteri01"){loggedUser=t[1]}a.user=i}).catch(()=>{a.user=i})},getSimulacionVivienda:function(a,r,t){var n=s.getUrl();var o,i;o=n+"/prestamos-rest/prestamos/simulacion-empleados";jQuery.ajax({type:"GET",async:false,url:o,data:a,headers:{Authorization:"Bearer "+r},success:function(e){if(e){i=e.listaCuotas}else{s.showErrorMsg("No se pudo realizar la simulaci贸n")}},error:function(e){s.showErrorMsg("No se pudo acceder a la simulaci贸n. UNRECHEABLE.")}});return new e(i)},getSimulacionConsumo:function(a,r,t){var n=s.getUrl();var o,i;o="/prestamos-rest/prestamos/simulacion-empleados";jQuery.ajax({type:"GET",async:false,url:o,data:a,headers:{Authorization:"Bearer "+r},success:function(e){if(e){i=e.listaCuotas}else{s.showErrorMsg("No se pudo realizar la simulaci贸n")}},error:function(e){s.showErrorMsg("No se pudo acceder a la simulaci贸n. UNRECHEABLE.")}});return new e(i)}}});
//# sourceMappingURL=models.js.map